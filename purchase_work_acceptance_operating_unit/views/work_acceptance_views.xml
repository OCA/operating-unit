<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <record id="view_work_acceptance_search" model="ir.ui.view">
        <field name="name">work.acceptance.search</field>
        <field name="model">work.acceptance</field>
        <field
            name="inherit_id"
            ref="purchase_work_acceptance.view_work_acceptance_search"
        />
        <field name="arch" type="xml">
            <xpath expr="//group[@expand='0']" position="after">
                <filter
                    string="Operating Unit"
                    name="operating_unit_grouped"
                    context="{'group_by': 'operating_unit_id'}"
                    groups="operating_unit.group_multi_operating_unit"
                />
            </xpath>
            <field name="user_id" position="after">
                <field
                    name="operating_unit_id"
                    groups="operating_unit.group_multi_operating_unit"
                />
            </field>
        </field>
    </record>

    <record id="view_work_acceptance_tree" model="ir.ui.view">
        <field name="name">work.acceptance.tree</field>
        <field name="model">work.acceptance</field>
        <field
            name="inherit_id"
            ref="purchase_work_acceptance.view_work_acceptance_tree"
        />
        <field name="arch" type="xml">
            <field name="responsible_id" position="after">
                <field
                    name="operating_unit_id"
                    domain="[('user_ids', 'in', uid)]"
                    groups="operating_unit.group_multi_operating_unit"
                />
            </field>
        </field>
    </record>

    <record id="view_work_acceptance_form" model="ir.ui.view">
        <field name="name">work.acceptance.form</field>
        <field name="model">work.acceptance</field>
        <field
            name="inherit_id"
            ref="purchase_work_acceptance.view_work_acceptance_form"
        />
        <field name="arch" type="xml">
            <field name="invoice_ref" position="after">
                <field
                    name="operating_unit_id"
                    domain="[('user_ids', 'in', uid)]"
                    groups="operating_unit.group_multi_operating_unit"
                />
            </field>
            <field name="wa_line_ids" position="attributes">
                <attribute
                    name="context"
                >{'operating_unit_id': operating_unit_id}</attribute>
            </field>
        </field>
    </record>
</odoo>
